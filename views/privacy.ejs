<!--
=========================================================
* Soft UI Dashboard - v1.0.3
=========================================================

* Product Page: https://www.creative-tim.com/product/soft-ui-dashboard
* Copyright 2021 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/_header') -%>
  <link rel="stylesheet" href="/assets/js/plugins/codemirror/codemirror.css">
</head>

<body class="g-sidenav-show  bg-gray-100">
  <%- include('partials/_sidebar') -%>
  <main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ">
    <!-- Navbar -->
    <%- include('partials/_navbar') -%>
    <!-- End Navbar -->
    <div class="container-fluid py-4">
      <div class="row mt-4">
        <div class="col-lg-7 mb-lg-0 mb-4">
          <div class="row">
            <div class="card">
              <div class="card-body p-3">
                <div class="row">
                  <p class="mb-1 pt-2 text-bold">Lock code</p>
                  <textarea id="code-readonly" name="code-readonly">
  var clientId = 'xxxxxxxxxxxxxxxxxxxxxxxxxxx';
  var domain = 'somedomain.us.auth0.com';
  var options = {
    container: "lockwidget",
    auth: {
      audience: "http://local.api"
    },
    additionalSignUpFields: [{
      type: "checkbox",
      name: "consentGiven",
      prefill: "false",
      placeholder: "I consent to data processing"
    }],
    
  };
  var lock = new Auth0Lock(clientId, domain,options);

  lock.show();

  lock.on('authenticated', function (authResult) {
    accessToken = authResult.accessToken;
    console.log("accessToken: ",accessToken);

    lock.getUserInfo(authResult.accessToken, function (error, profileResult) {
      if (error) {
        // Handle error
        console.log("Error: ", error);
        return;
      }

      profile = profileResult;
      console.log("profile: ",profile);
    });
  });
                  </textarea>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-4">
            <div class="card h-100 p-3">
              <p class="mb-1 pt-2 text-bold">Documentation</p>
              <a href="https://auth0.com/docs/secure/data-privacy-and-compliance/gdpr/gdpr-track-consent-with-lock" target="_blank">Click here for documentation</a>
            </div>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card h-100 p-3">
            <p class="mb-1 pt-2 text-bold">Resulting widget</p>
            <div class="col-md-12 grid-margin" id="lockwidget"></div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>

  <!-- Plugin js for this page -->
  <script src="https://cdn.auth0.com/js/lock/11.32.1/lock.min.js"></script>
  <script src="/assets/js/plugins/codemirror/codemirror.js"></script>
  <script src="/assets/js/plugins/codemirror/javascript.js"></script>
  <script src="/assets/js/plugins/codeEditor.js"></script>
  <!-- End plugin js for this page -->
  
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/soft-ui-dashboard.min.js?v=1.0.3"></script>

  <script>
    var options = {
      container: "lockwidget",
      auth: {
        audience: AUDIENCE
      },
      additionalSignUpFields: [{
        type: "checkbox",
        name: "consentGiven",
        prefill: "false",
        placeholder: "I consent to data processing"
      }],
      initialScreen: 'signUp'
    };
    var lock = new Auth0Lock(CLIENTID, DOMAIN, options);
    
    lock.show();

    lock.on('authenticated', function (authResult) {
      accessToken = authResult.accessToken;
      console.log("accessToken: ",accessToken);

      lock.getUserInfo(authResult.accessToken, function (error, profileResult) {
        if (error) {
          // Handle error
          console.log("Error: ", error);
          return;
        }

        profile = profileResult;
        console.log("profile: ",profile);
        // Update DOM
      });
    });

  </script>
</body>

</html>